# 高级提示词工程

高级提示词工程（Prompt Engineering）是指针对大语言模型（如 GPT-4）设计、优化多步推理与复杂输出的提示词（Prompt）技术，以提升模型的表现、可控性和输出结构化程度。相比基础的“一问一答”，高级提示词工程在多轮对话、复杂问题分解、外部工具调用等实际应用中尤为重要。下面将结合常见技术点逐项介绍，并配以示例。

## 1. Few-shot Learning（少样本学习）

通过在提示词中展示多个样例，引导模型按预期格式或风格生成输出。适合文本分类、摘要、翻译等任务。

**示例：新闻简要生成**

```
你是一个新闻摘要助手。请将每条新闻压缩为一句话总结。

示例1:
原文: 昨日北京遭遇大暴雨, 城市多处积水。
总结: 北京昨日暴雨导致多地积水。

示例2:
原文: 苹果公司发布了新一代iPhone，售价创新高。
总结: 苹果推出新款iPhone，价格创新高。

请总结下述新闻:
原文: SpaceX成功发射新一批互联网卫星。
总结:
```

## 2. Chain of Thought (CoT)（思维链）

引导模型「分步骤」展示推理过程，提高复杂任务的准确性和透明度，常用于数学、推理或决策问题。

**示例：数学题分步推理**

```
请按步骤思考并回答：

问题：甲比乙多10个苹果，乙有15个苹果，问甲有几个？
步骤1：乙有多少个苹果？
步骤2：甲比乙多几个苹果？
步骤3：甲有多少个苹果？
答案：
```

## 3. ReAct 模式（推理+行动）

结合「推理」与「行动」结构，让模型在遇到无法直接回答的问题时，能够先分析、再决定是否调用外部工具（如网络搜索、数据库等），反馈中明确分隔“思考”（Thought）、“行动”（Action）、“观察结果”（Observation）。

**示例：带计算与外部工具调用的推理**

```
问题：美国总统生日那天距离今天有多少天？

Thought: 需要先查找美国总统的生日，然后计算与今天的天数间隔。
Action: 搜索“现任美国总统的生日”。
Observation: 查询结果显示“乔·拜登生日为1942年11月20日”。
Thought: 今天的日期是2024年4月8日，距离拜登的生日还有多长时间？
Action: 计算2024年4月8日到2024年11月20日的天数。
Observation: 结果为226天。

Final Answer: 现任美国总统乔·拜登的生日距离今天还有226天。
```

## 4. 结构化输出

要求模型严格按照 JSON、表格或特定格式输出，便于后端程序处理和解析。

**示例：输出书籍信息为 JSON**

```
请根据下述描述，提取书名、作者和出版年份，输出为JSON格式。

描述: 《活着》是余华于1993年出版的小说。

输出:
{
  "书名": "活着",
  "作者": "余华",
  "出版年份": 1993
}
```

## 总结

以上四种高级提示词工程模式可简单总结为：

1. **Few-shot Learning（少样本学习）**：通过给模型提供多个“示例-响应”对，引导其学会遵循既定风格或模式作答，提升一致性与准确性。
2. **Chain of Thought（思维链）**：鼓励模型分步思考和展示推理过程，适合复杂、逻辑性强的问题，提高问题解决能力和答案可靠性。
3. **ReAct 模式（推理+行动）**：将模型推理与外部操作结合，让其在需要时自主调用工具、搜索信息，并根据观察结果作出最终回答，提升知识覆盖面和实用性。
4. **结构化输出**：要求模型输出固定格式（如 JSON、表格），便于后续程序处理，实现信息抽取与系统集成的自动化。

灵活运用这些模式，可以让大模型在实际业务和产品中发挥更智能、更可控的能力，降低出错率，提升集成效率。
