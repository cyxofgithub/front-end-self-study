esm 在解析的时候使用严格模式所以 this 是 undefiend

esm 除了对象其他 import 的值不可更改，export 的值都可以更改

循环依赖时会返回模块引用，所以不会有循环依赖问题，只要控制好时机取值就可，比如 setTimeout 中

**工作流程：**

**1. 静态解析（Static Analysis）**

在编译阶段，JavaScript 引擎会对源码中的 import 和 export 语句进行静态解析。此时会构建一个模块依赖图（Module Dependency Graph），明确每个模块中的依赖关系，但不会立即执行这些模块的代码。

**2. 模块解析（Module Resolution）**

这个阶段会确定每个模块的路径。解析 import 语句的模块路径以找到并加载模块文件。解析涉及以下几种路径：

相对路径：如 ./module.js 或 ../module.js。
绝对路径：通常在服务器或工具链配置中使用。
包名：如 import something from 'some-package'。

**3. 模块缓存（Module Caching）**

在模块被解析和加载之后，它们会被缓存起来，以避免重复加载。每个模块只会在第一次加载时被执行一次，之后的加载会直接从缓存中获取上次加载的结果。

**4. 模块实例化（Module Instantiation）**

在实例化阶段，每个模块会分配一个作用域，包含它的所有变量。这确保每个模块的变量是独立的，不会互相污染。

**5. 模块执行（Module Evaluation）**

在所有模块解析完成并实例化之后，模块的代码会被执行，变量和函数会被定义。在这个阶段，模块会根据依赖图中的顺序被执行。这是所有动态代码（如函数定义和执行）都发生的地方。
