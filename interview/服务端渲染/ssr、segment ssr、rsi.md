## SSR、Segment SSR、RSI 简介及渲染流程

### 1. SSR（Server Side Rendering，服务端渲染）

**简介：**  
SSR 指页面的 HTML 内容在**服务器端**生成，再传递给浏览器渲染。前端收到完整的 HTML，首屏加载和 SEO 效果较好，常见于 Next.js、Nuxt.js 等框架。

**渲染流程：**

1. 客户端请求页面（如 /home）
2. 服务器接收请求，获取数据
3. 服务器用模板或前端代码生成 HTML
4. 返回完整 HTML 给浏览器
5. 浏览器加载 HTML，JS 脚本启动水合，页面可交互

---

### 2. Segment SSR（分段服务端渲染）

**简介：**  
Segment SSR 是 SSR 的一种优化方式，也称为**分段流式渲染**（Streaming SSR）。即服务器一边渲染一边将「页面片段」流式发送给前端，而不是等页面整体渲染完成再返回，提高首屏速度。React 18、Next.js 等支持流式 SSR。

**渲染流程：**

1. 客户端发起页面请求
2. 服务器分片依次渲染页面各区域
3. 每渲染完一部分 HTML 就立刻将内容流式发送到浏览器
4. 浏览器边接收边渲染，首屏更快
5. 前端 JS 启动水合，完成交互绑定

---

### 3. RSI（Resumable Server-Side Rendering，可恢复服务端渲染）

**简介：**  
RSI 是指**可恢复/断点续传的 SSR**，某些框架（如 Qwik）提出。它不仅服务端渲染 HTML，还能只序列化和下发「必要的页面状态」，前端无需重新执行/水合全部 JS，而是根据需要恢复可交互性，实现极致首屏和懒加载交互。

**渲染流程：**

1. 服务端生成 HTML 并嵌入必要状态数据（可恢复点）
2. 浏览器加载并渲染 HTML
3. 用户交互时，只加载当前需要的 JS 逻辑
4. 根据嵌入状态「恢复」交互，避免全量 JS 水合，更快响应

---

### 总结

|      | SSR              | Segment SSR（分段 SSR）    | RSI                      |
| ---- | ---------------- | -------------------------- | ------------------------ |
| 首屏 | 好               | 更快（可以“流式”到达用户） | 极快（无需全量 JS 水合） |
| 流程 | 等整体生成后返回 | 边渲染边传输，流式部分展示 | 渲染+最小状态打点+懒水合 |
| 代表 | Next.js、Nuxt    | React 18、Next.js          | Qwik 等新一代框架        |
| 适用 | 普遍             | 大流量/大页面首屏优化场景  | 极致首屏/极致性能场景    |
