## vue3 为什么改用 proxy

### vue2 使用 Object.defineProperty 的局限性

-   **无法监听数组的变化：**Object.defineProperty 只能劫持对象的属性，无法直接监听数组的变化。Vue 2 通过重写数组的方法（如 push、pop 等）来解决这个问题，但这并不是一个优雅的解决方案。
-   **无法劫持新增属性：**Object.defineProperty 只能劫持对象已有的属性，无法监听新增属性的变化。Vue 2 通过 Vue.set 方法来手动添加响应式属性，但这增加了使用的复杂性。
-   **性能问题：**Object.defineProperty 在初始化时需要遍历对象的每个属性并进行劫持，对于深层嵌套的对象，性能开销较大。

### proxy 的优点

-   **全面劫持：**Proxy 可以劫持包括属性读取、设置、删除、函数调用等在内的多种操作，提供了更全面的劫持能力。
-   **数组支持：**Proxy 可以直接劫持数组的操作，无需像 Vue 2 那样重写数组方法。
-   **动态属性：**Proxy 可以劫持对象的动态属性添加和删除，解决了 Object.defineProperty 无法监听新增属性的问题。
-   **性能提升：**Proxy 在处理深层嵌套对象时性能更好，因为它不需要在初始化时遍历所有属性,Proxy 的拦截是懒执行的（访问属性时才追踪依赖）
